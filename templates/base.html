
<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- 文字セットを先頭に配置 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7L7EF7JGCD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7L7EF7JGCD');
    </script>
    
    <!-- SEO基本設定 -->
    <title>{% block title %}鶯 | 越谷市バドミントンサークル{% endblock %}</title>
    <meta name="description" content="{% block description %}埼玉県越谷市で活動しているバドミントンサークルです。経験者から初心者まで楽しく活動中。見学・体験随時募集中。{% endblock %}">
    <meta name="keywords" content="{% block keywords %}埼玉県,越谷市,バドミントン,社会人サークル,大会,ミックスダブルス,男子ダブルス,女子ダブルス{% endblock %}">
    <meta name="robots" content="index, follow">
    <meta http-equiv="content-language" content="ja">
    <link rel="canonical" href="{{ request.url }}">
    
    <!-- OGP設定 -->
    <meta property="og:title" content="{% block og_title %}{{ self.title()|striptags|trim }}{% endblock %}">  
    <meta property="og:description" content="{% block og_description %}{{ self.description()|striptags|trim }}{% endblock %}">
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:site_name" content="鶯 | 越谷市バドミントンサークル">
    <meta property="og:image" content="https://uguis-bad.shibuya8020.com/static/images/2025/tournament2025_03.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="鶯バドミントンサークルのイメージ画像">
    <meta property="og:locale" content="ja_JP">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@rbn17pjAfz41575">
    <meta name="twitter:image" content="https://uguis-bad.shibuya8020.com/static/images/2025/tournament2025_03.jpg">
    <meta name="twitter:image:alt" content="鶯バドミントンサークルのイメージ画像">

    <!-- Bootstrap CSS（プリロード＋onloadで読み込み） -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous"></noscript>

    <!-- 自作CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- Font Awesome（遅延読み込み） -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" media="print" onload="this.onload=null;this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"></noscript>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous" defer></script>

    <!-- 基本構造化データ -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SportsClub",
      "name": "鶯 | 越谷市バドミントンサークル",
      "description": "埼玉県越谷市のバドミントンサークル。経験者から初心者まで楽しく活動中。",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "越谷市",
        "addressRegion": "埼玉県",
        "addressCountry": "JP"
      },
      "sport": "Badminton",
      "url": "https://uguis-bad.shibuya8020.com/",
      "image": "https://uguis-bad.shibuya8020.com/static/images/001.jpg",
      "logo": "https://uguis-bad.shibuya8020.com/static/images/001.jpg"
    }
    </script>
    

    <!-- 追加のメタタグ（ページ固有の設定） -->
    {% block extra_meta %}{% endblock %}
      
</head>

<style>
body {
    padding-bottom: 80px !important;
}

.fixed-footer {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    padding-left: 10px !important;  /* 左パディング */
    padding-right: 10px !important; /* 右パディング */
    z-index: 1020 !important;
    background-color: #f8f9fa !important;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1) !important;
    box-sizing: border-box !important; /* パディングを幅に含める */
    color: #2c3e50 !important;
}

/* タイトルの色を統一 */
.navbar-title {
    margin: 0 !important;
    font-size: 1.5rem !important;
    color: #2c3e50 !important;
}

/* または、ヘッダーと同じ色に統一する場合 */
.navbar-light .navbar-nav .nav-link.text-warning {
    color: #ffc107 !important; /* 元のwarning色 */
}

</style>

<body>

  <header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
      <div class="container">          
        <a class="navbar-brand fst-italic" href="{{ url_for('index') }}"><h1 class="navbar-title">鶯 badminton</h1></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>        
        
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">

                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="{{ url_for('uguu.show_timeline') }}">うぐすたぐらむ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="{{ url_for('bad_manager') }}">質問</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('gallery') }}">ギャラリー</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('video_link') }}">動画集</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('uguis2024_tournament') }}">鶯杯2024</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('uguis2025_tournament') }}">鶯杯2025</a>
                </li>

                {% if current_user.is_authenticated and current_user.administrator %}
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('user_maintenance') }}">登録者</a>
                </li>    
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('schedule.admin_schedules') }}">練習予定</a>
                </li>
                {% endif %}                
            </ul>

            {% if current_user.is_authenticated and current_user.administrator %}
            <div class="d-flex">
            <a class="btn btn-outline-warning ms-2" href="{{ url_for('game.create_test_data') }}" target="_blank" rel="noopener noreferrer">データ作成</a>
            <a class="btn btn-outline-secondary ms-2" href="{{ url_for('game.clear_test_data') }}">データ削除</a>
            <a class="btn btn-outline-info ms-2" href="{{ url_for('badminton_chat_logs_page') }}">ログ</a>
            </div>
            {% endif %}
            
            
        </div>
      </div>
    </nav>      
  </header>

    {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="container mt-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category in ['error','danger'] else category|default('info') }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
                </div>
            {% endif %}
            {% endwith %}

  {% from "_formhelpers.html" import render_field %} 

  {% block content %}
  {% endblock %}

<!-- 固定フッター（間隔調整版） -->
<footer class="fixed-footer">
  <nav class="navbar navbar-light bg-light">
    <div class="container d-flex justify-content-between align-items-center">
      <a class="navbar-brand fst-italic" href="{{ url_for('index') }}">
        <h1 class="navbar-title fs-1">鶯</h1>
      </a>

      <ul class="navbar-nav d-flex flex-row align-items-center">
        {% if current_user.is_authenticated %}
          <li class="nav-item">
            <a class="btn btn-outline-danger ms-2"
               href="{{ url_for('game.court') }}"
               target="_blank"
               rel="noopener noreferrer"
               title="新しいタブで待機画面を開きます">
              <i class="fas fa-external-link-alt me-1"></i>コート
            </a>
          </li>

          <style>
            /* 汎用クラス */
            .avatar-ig {
                --size: 40px;   /* 画像の直径 */
                --ring: 3px;    /* グラデーションの太さ */
                --gap: 1px;     /* 画像とリングの間の白い縁（0でなし） */

                display: inline-grid;
                place-items: center;
                width: calc(var(--size) + (var(--ring) + var(--gap)) * 2);
                height: calc(var(--size) + (var(--ring) + var(--gap)) * 2);
                border-radius: 50%;
                padding: calc(var(--ring) + var(--gap));
                background: conic-gradient(
                #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5, #feda75
                ); /* Instagram風 */
            }
            .avatar-ig > img {
                width: var(--size);
                height: var(--size);
                object-fit: cover;
                border-radius: 50%;
                display: block;
                background: #fff;        /* 透過画像のための白バック */
                box-shadow: 0 0 0 var(--gap) #fff; /* 白い縁取り（--gapと揃う） */
            }
            /* お好み：ホバーで少し光らせる */
            .avatar-ig:hover { filter: brightness(1.05); }
            </style>

          <li class="nav-item ms-4">
            <a class="nav-link fw-bold text-warning d-flex align-items-center fs-4"
            href="{{ url_for('account', user_id=(current_user.user_id or current_user.id)) }}">
            <span class="avatar-ig" style="--size:40px;--ring:3px;--gap:2px;">
                <img
                src="{{ current_user.profile_image_url or url_for('static', filename='images/default.jpg') }}"
                alt="プロフィール画像"
                loading="lazy" decoding="async"
                onerror="this.onerror=null;this.src='{{ url_for('static', filename='images/default.jpg') }}'">
            </span>
            <span class="ms-2">{{ current_user.display_name | truncate(10) }}</span>
            </a>
            </li>
        {% else %}
          <li class="nav-item ms-4">
            <a class="nav-link" href="{{ url_for('login') }}">ログイン</a>
          </li>
        {% endif %}
      </ul>
    </div>
  </nav>
</footer>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.navbar').forEach(function (navbar) {
        const toggler = navbar.querySelector('.navbar-toggler');
        if (!toggler) return;

        const targetSelector = toggler.getAttribute('data-bs-target') || ('#' + (toggler.getAttribute('aria-controls') || ''));
        const menu = targetSelector ? document.querySelector(targetSelector) : null;
        if (!menu) return;

        const MQ_WIDTH = 992;
        const mq = window.matchMedia('(min-width: ' + MQ_WIDTH + 'px)');

        function syncByWidth(e) {
        if (e.matches) {
            menu.classList.add('show');            // デスクトップ：常時展開
            toggler.setAttribute('aria-expanded', 'true');
        } else {
            menu.classList.remove('show');         // モバイル：閉
            toggler.setAttribute('aria-expanded', 'false');
        }
        }
        (mq.addEventListener || mq.addListener).call(mq, 'change', syncByWidth);
        syncByWidth(mq);

        toggler.addEventListener('click', function (ev) {
        ev.preventDefault();
        const isOpen = menu.classList.toggle('show');
        toggler.setAttribute('aria-expanded', String(isOpen));
        });

        // モバイル時：リンククリックで閉じる
        menu.addEventListener('click', function (e) {
        if (window.innerWidth >= MQ_WIDTH) return;
        if (e.target.closest('.nav-link')) {
            menu.classList.remove('show');
            toggler.setAttribute('aria-expanded', 'false');
        }
        });

        // モバイル時：外側クリックで閉じる（このナビの外のみ）
        document.addEventListener('click', function (e) {
        if (window.innerWidth >= MQ_WIDTH) return;
        const insideThisNavbar = e.target.closest('.navbar') === navbar;
        if (!insideThisNavbar && menu.classList.contains('show')) {
            menu.classList.remove('show');
            toggler.setAttribute('aria-expanded', 'false');
        }
        });

        // モバイル時：Escキーで閉じる
        document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' && window.innerWidth < MQ_WIDTH && menu.classList.contains('show')) {
            menu.classList.remove('show');
            toggler.setAttribute('aria-expanded', 'false');
        }
        });
    });
    });
    </script>
    <script>
    document.addEventListener('click', function(e){
    const btn = e.target.closest('[data-bs-dismiss="alert"]');
    if (!btn) return;
    const alert = btn.closest('.alert');
    if (alert) {
        alert.classList.remove('show'); // フェード用クラスを外す（任意）
        alert.addEventListener('transitionend', () => alert.remove(), {once:true});
        // フェードが無い場合は即 remove でも可
        if (getComputedStyle(alert).transitionDuration === '0s') alert.remove();
    }
    });
    </script>

</body>
</html>